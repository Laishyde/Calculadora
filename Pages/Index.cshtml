@page
@model Calculadora_teste.Pages.IndexModel
@{
    ViewData["Title"] = "Calculadora Moderna";
}

<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">

        <!-- CALCULADORA -->
        <div class="animate-fade-in-up">
            <div class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-xl border border-slate-200/50 p-8 lg:p-10">

                <form id="calcForm" method="post" asp-page-handler="Calculate" class="space-y-6">
                    <!-- Valores A e B -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-lg font-semibold text-slate-800 mb-3">Valor A</label>
                            <input asp-for="ValorA" type="number" step="any" class="w-full rounded-2xl border-2 border-slate-200 px-6 py-4 text-xl text-slate-900" placeholder="0.00" />
                        </div>

                        <div>
                            <label class="block text-lg font-semibold text-slate-800 mb-3">Valor B</label>
                            <input asp-for="ValorB" type="number" step="any" class="w-full rounded-2xl border-2 border-slate-200 px-6 py-4 text-xl text-slate-900" placeholder="0.00" />
                        </div>
                    </div>

                    <!-- Operação -->
                    <div class="pt-2">
                        <label class="block text-center text-lg font-semibold text-slate-700 mb-6">Escolha a operação</label>
                        <div class="grid grid-cols-2 gap-4 max-w-md mx-auto">
                            <input type="radio" class="sr-only" name="Operacao" id="add" value="+" />
                            <label for="add" class="operation-label group p-6 rounded-2xl bg-blue-50/80 border-2 border-blue-200 text-blue-800 font-bold text-lg shadow-md cursor-pointer">
                                <div class="flex flex-col items-center gap-1">
                                    <span class="text-3xl">+</span>
                                    <span>Adição</span>
                                </div>
                            </label>

                            <input type="radio" class="sr-only" name="Operacao" id="sub" value="-" />
                            <label for="sub" class="operation-label group p-6 rounded-2xl bg-blue-50/80 border-2 border-blue-200 text-blue-800 font-bold text-lg shadow-md cursor-pointer">
                                <div class="flex flex-col items-center gap-1">
                                    <span class="text-3xl">−</span>
                                    <span>Subtração</span>
                                </div>
                            </label>

                            <input type="radio" class="sr-only" name="Operacao" id="mul" value="*" />
                            <label for="mul" class="operation-label group p-6 rounded-2xl bg-blue-50/80 border-2 border-blue-200 text-blue-800 font-bold text-lg shadow-md cursor-pointer">
                                <div class="flex flex-col items-center gap-1">
                                    <span class="text-3xl">×</span>
                                    <span>Multiplicação</span>
                                </div>
                            </label>

                            <input type="radio" class="sr-only" name="Operacao" id="div" value="/" />
                            <label for="div" class="operation-label group p-6 rounded-2xl bg-blue-50/80 border-2 border-blue-200 text-blue-800 font-bold text-lg shadow-md cursor-pointer">
                                <div class="flex flex-col items-center gap-1">
                                    <span class="text-3xl">÷</span>
                                    <span>Divisão</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <button type="submit" class="w-full bg-gradient-to-r from-slate-800 via-blue-800 to-slate-900 text-white font-extrabold text-lg py-3 px-6 rounded-2xl shadow-xl">Calcular ➤</button>
                </form>

              

            </div>
        </div>

        <!-- HISTÓRICO -->
        @if (Model.Calculos.Any())
        {
            <div class="animate-fade-in-up">
                <div class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-xl border border-slate-200/50 p-6 lg:p-8 max-w-full">
                    <div class="text-center mb-6">
                        <h2 class="text-2xl font-black text-slate-800 mb-1">📋 Histórico</h2>
                        <p class="text-slate-600 text-sm">Seus últimos cálculos</p>
                    </div>

                    <table class="w-full text-xs sm:text-sm table-auto">
                        <thead>
                            <tr class="bg-slate-100 text-slate-800">
                                <th class="p-2 text-left font-bold">ID</th>
                                <th class="p-2 text-left font-bold">A</th>
                                <th class="p-2 text-center font-bold">Op</th>
                                <th class="p-2 text-left font-bold">B</th>
                                <th class="p-2 text-left font-bold">Resultado</th>
                                <th class="p-2 text-left font-bold">Data</th>
                                <th class="p-2 text-center font-bold">Ação</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200">
                            @foreach (var c in Model.Calculos)
                            {
                                <tr class="hover:bg-slate-50 transition-colors group text-xs sm:text-sm">
                                    <td class="p-2 font-bold text-blue-600">#@c.Id</td>
                                    <td class="p-2">@c.ValorA.ToString("N2")</td>
                                    <td class="p-2 text-center">
                                        <span class="px-2 py-0.5 rounded-full text-[0.6rem] font-bold
                                                             @(c.Operacao == "+" ? "bg-emerald-100 text-emerald-800" :
                                                  c.Operacao == "-" ? "bg-amber-100 text-amber-800" :
                                                                                                                                                                                             c.Operacao == "*" ? "bg-blue-100 text-blue-800" :
                                                                                                                                                                                            "bg-rose-100 text-rose-800")">
                                                                                                     
                                    @c.Operacao
                                </span>
                            </td>
                            <td class="p-2">@c.ValorB.ToString("N2")</td>
                            <td class="p-2 font-bold text-emerald-600">@c.Resultado.ToString("N2")</td>
                            <td class="p-2 text-[0.7rem] text-slate-500">@c.DataCalculo.ToString("dd/MM HH:mm")</td>
                            <td class="p-2 text-center">
                                <form method="post" asp-page-handler="Delete" class="inline">
                                    <input type="hidden" name="id" value="@c.Id" />
                                    <button type="submit"
                                            class="px-2 py-1 bg-rose-500 hover:bg-rose-600 text-white text-xs font-bold rounded-lg
                                                           transition-all duration-300 hover:scale-105 shadow-sm"
                                            onclick="return confirm('Excluir cálculo #@c.Id?')">
                                        🗑️
                                    </button>
                                </form>
                            </td>
                        </tr>
                                                }
                        </tbody>
                    </table>
                </div>
            </div>
        }
    </div>
@if (Model.MostrarModal && Model.Calculos.Any())
{
    var ultimo = Model.Calculos.Last();
        <div id="feedbackModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 opacity-0 pointer-events-none transition duration-300">
            <div class="bg-white rounded-3xl shadow-2xl p-6 max-w-sm w-full text-center transform scale-95 transition-transform duration-300">
                <div class="text-4xl mb-3">✅</div>
                <h3 class="font-bold text-lg mb-2">Dados armazenados com sucesso</h3>
            </div>
        </div>
}

  


